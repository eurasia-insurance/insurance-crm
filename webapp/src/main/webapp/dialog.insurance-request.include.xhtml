<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:comp="http://xmlns.jcp.org/jsf/composite"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">


	<!-- >> wrapper -->
	<h:panelGroup id="viewInsuranceRequestDialogWrapper">

		<!-- >> rendered -->
		<h:panelGroup rendered="#{not empty insuranceRequest.value}">

			<!-- >> dialog -->
			<p:dialog widgetVar="viewInsuranceRequestDialogWV" modal="true"
				closable="true" minHeight="800" minWidth="1024" width="1024"
				height="800" closeOnEscape="true" minimizable="false"
				maximizable="true"
				header="#{insuranceProductTypeService.displayNameShort(insuranceRequest.value.productType)} # #{insuranceRequest.value.id} : #{insuranceRequest.value.requester.name}">

				<ui:include src="dialog.insurance-request.menu.include.xhtml" />

				<!-- >> rendered POLICY -->
				<h:panelGroup
					rendered="#{insuranceRequest.value.productType == 'POLICY'}">
					<p:accordionPanel dynamic="true" cache="true" activeIndex="0">
						<p:tab title="Общие сведения">
							<ui:include src="dialog.insurance-request.general.include.xhtml" />
						</p:tab>
						<p:tab title="Доставка"
							rendered="#{insuranceRequest.value.obtaining.method == 'DELIVERY'}">
							<ui:include
								src="dialog.insurance-request.obtaining.delivery.include.xhtml" />
						</p:tab>
						<p:tab title="Самовывоз"
							rendered="#{insuranceRequest.value.obtaining.method == 'PICKUP'}">
							<ui:include
								src="dialog.insurance-request.obtaining.pickup.include.xhtml" />
						</p:tab>
						<p:tab title="Оплата">
							<ui:include src="dialog.insurance-request.payment.include.xhtml" />
						</p:tab>
						<p:tab title="Список застрахованных водителей">
							<ui:include
								src="dialog.insurance-request.policy.drivers.include.xhtml" />
						</p:tab>
						<p:tab title="Список застрахованных транспортных средств">
							<ui:include
								src="dialog.insurance-request.policy.vehicles.include.xhtml" />
						</p:tab>
					</p:accordionPanel>
				</h:panelGroup>
				<!-- << rendered POLICY -->

				<!-- >> rendered CASCO -->
				<h:panelGroup
					rendered="#{insuranceRequest.value.productType == 'CASCO'}">
					<p:accordionPanel dynamic="true" cache="true" activeIndex="0">
						<p:tab title="Общие сведения">
							<ui:include src="dialog.insurance-request.general.include.xhtml" />
						</p:tab>
						<p:tab title="Доставка"
							rendered="#{insuranceRequest.value.obtaining.method == 'DELIVERY'}">
							<ui:include
								src="dialog.insurance-request.obtaining.delivery.include.xhtml" />
						</p:tab>
						<p:tab title="Самовывоз"
							rendered="#{insuranceRequest.value.obtaining.method == 'PICKUP'}">
							<ui:include
								src="dialog.insurance-request.obtaining.pickup.include.xhtml" />
						</p:tab>
						<p:tab title="Оплата">
							<ui:include src="dialog.insurance-request.payment.include.xhtml" />
						</p:tab>
						<p:tab title="Список водителей допущенных к управлению ТС">
							<ui:include
								src="dialog.insurance-request.casco.drivers.include.xhtml" />
						</p:tab>
						<p:tab title="Информация о застрахованном ТС">
							<ui:include
								src="dialog.insurance-request.casco.vehicle.include.xhtml">
								<ui:param name="casco" value="#{insuranceRequest.value.product}" />
							</ui:include>
						</p:tab>
					</p:accordionPanel>
				</h:panelGroup>
				<!-- << rendered CASCO -->

			</p:dialog>
			<!-- << dialog -->

		</h:panelGroup>
		<!-- << rendered -->

	</h:panelGroup>
	<!-- << wrapper -->

</ui:composition>
