<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:comp="http://xmlns.jcp.org/jsf/composite"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">

	<f:subview>

		<!-- >> toolbar -->
		<p:toolbar id="mainToolbar">
			<f:facet name="left">
				<p:commandButton value="Принять в обработку"
					icon="fa fa-play-circle" disabled="#{ir.progressStatus ne 'NEW'}"
					action="#{mainFacade.doAcceptRequest}" process="@this"
					update="@this mainToolbar #{update}" />

				<p:commandButton value="Приостановить" icon="fa fa-pause-circle"
					disabled="#{ir.progressStatus ne 'ON_PROCESS'}"
					rendered="#{ir.progressStatus ne 'ON_HOLD'}"
					action="#{mainFacade.doPauseRequest}" process="@this"
					update="@this mainToolbar #{update}" />

				<p:commandButton value="Возобновить" icon="fa fa-play-circle"
					disabled="#{ir.progressStatus ne 'ON_HOLD'}"
					rendered="#{ir.progressStatus eq 'ON_HOLD'}"
					action="#{mainFacade.doResumeRequest}" process="@this"
					update="@this mainToolbar #{update}" />

				<p:commandButton value="Обработка завершена..." icon="fa fa-check-circle"
					disabled="#{ir.progressStatus ne 'ON_PROCESS'}" process="@this"
					update="@this @form:requestProgressCompleteDialog"
					oncomplete="PF('requestProgressCompleteDialogWV').show(); return false;">
					<p:resetInput target="@form:requestProgressCompleteDialog" />
				</p:commandButton>

				<h:panelGroup styleClass="ui-separator">
					<h:panelGroup class="ui-icon ui-icon-grip-dotted-vertical" />
				</h:panelGroup>

				<p:commandButton value="Закрыть заявку..." icon="fa fa-window-close"
					disabled="#{ir.progressStatus ne 'FINISHED' or ir.status eq 'CLOSED'}" process="@this"
					update="@this @form:requestCloseDialog"
					oncomplete="PF('requestCloseDialogWV').show(); return false;">
					<p:resetInput target="@form:requestCloseDialog" />
				</p:commandButton>

			</f:facet>
		</p:toolbar>
		<p:sticky target="mainToolbar" />
		<!-- << toolbar -->

	</f:subview>

</ui:composition>
