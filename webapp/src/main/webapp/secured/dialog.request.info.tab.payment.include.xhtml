<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:jfc="http://lapsa.tech/javax/faces-commons"
	xmlns:crm="http://xmlns.jcp.org/jsf/composite/crm">

	<p:tab title="Оплата" rendered="#{rendered}">

		<p:panel>
			<p:panelGrid>

				<crm:outputRow label="Номер счета"
					rendered="#{not empty rr.paymentInvoiceNumber}">
					<p:inputText readonly="true" size="35"
						value="#{rr.paymentInvoiceNumber}" onfocus="this.select()" />
					<p:button id="numberCopy" icon="fa fa-copy" href="#"
						title="Скопирвать номер в буфер обмена" />
					<pe:clipboard trigger="numberCopy" action="copy"
						text="#{rr.paymentInvoiceNumber}" />
				</crm:outputRow>

				<crm:outputRow label="Ссыла на оплату"
					rendered="#{not empty rr.paymentInvoiceNumber}">
					<ui:param name="url"
						value="#{functionFacade.paymentUrl(rr.paymentInvoiceNumber)}" />
					<p:inputText readonly="true" value="#{url}" onfocus="this.select()"
						size="45" />
					<p:button id="pageCopy" icon="fa fa-fw fa-copy" href="#"
						title="Скопирвать ссылку в буфер обмена" />
					<p:button href="#{url}" icon="fa fa-fw fa-external-link"
						target="_blank" title="Отркыть страницу оплаты" value="Go!" />
					<pe:clipboard trigger="pageCopy" action="copy" text="#{url}" />
				</crm:outputRow>

				<crm:outputRowText label="Статус оплаты"
					value="#{localized.few(rr.paymentStatus)}" />

				<crm:outputRowText label="Фактический метод оплаты"
					value="#{rr.paymentMethodName}" />

				<crm:outputRow label="Фактически оплаченная сумма">
					<jfc:outputMoneyAmount value="#{rr.paymentAmount}"
						currency="#{rr.paymentCurrency}" />
				</crm:outputRow>

				<crm:outputRow label="Время фактической оплаты">
					<jfc:outputInstant value="#{rr.paymentInstant}" />
				</crm:outputRow>

				<crm:outputRowText label="Референс оплаты"
					value="#{rr.paymentReference}" />

			</p:panelGrid>
		</p:panel>

	</p:tab>

</ui:composition>
