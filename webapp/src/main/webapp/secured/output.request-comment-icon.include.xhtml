<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

	<c:set var="iconNoteClass"
		value="#{empty rr.note ? 'far fa-comments icon-note-no' : 'fas fa-comments icon-note-has'}" />

	<p:commandLink process="@this" update="@form:commentRequestDialog"
		oncomplete="PF('commentRequestDialogWV').show(); return false;">
		<h:panelGroup styleClass="request-icon" id="noteIconWrapper">
			<h:panelGroup styleClass="#{iconNoteClass}" />
		</h:panelGroup>
		<f:setPropertyActionListener value="#{rr}" target="#{rqst.singleRow}" />
	</p:commandLink>

	<p:tooltip for="noteIconWrapper" trackMouse="true">
		<h:outputText value="Нажмите, чтобы оставить комментарий"
			styleClass="add-comment-message" />
		<h:panelGroup rendered="#{not empty rr.note}">
			<br />
			<br />
			<p:inputTextarea value="#{rr.note}" placeholder="Нет комментариев"
				style="border: none" readonly="true" cols="70" rows="5"
				autoResize="false" disabled="true" />
		</h:panelGroup>
	</p:tooltip>

</ui:composition>
