<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:o="http://omnifaces.org/ui" xmlns:p="http://primefaces.org/ui"
	xmlns:crm="http://xmlns.jcp.org/jsf/composite/crm"
	xmlns:lpf="http://lapsa.tech/primefaces">

	<o:importConstants type="tech.lapsa.insurance.crm.beans.i.RequestType" />

	<f:subview>


		<p:panelGrid id="requestStatusButtonsWrapper">
			<p:row>
				<p:column>
					<p:commandLink process="@this"
						update="#{update} requestStatusButtonsWrapper" value="Входящие"
						style="#{settings.requestFilter.requestStatus == 'OPEN' ? 'font-weight: bold' : ''}">
						<f:setPropertyActionListener
							target="#{settings.requestFilter.requestStatus}" value="OPEN" />
					</p:commandLink>
				</p:column>
				<p:column>
					<p:commandLink process="@this"
						update="#{update} requestStatusButtonsWrapper" value="Архив"
						style="#{settings.requestFilter.requestStatus == 'CLOSED' ? 'font-weight: bold' : ''}">
						<f:setPropertyActionListener
							target="#{settings.requestFilter.requestStatus}" value="CLOSED" />
					</p:commandLink>
				</p:column>
				<p:column>
					<p:commandLink process="@this"
						update="#{update} requestStatusButtonsWrapper" value="Все"
						style="#{settings.requestFilter.requestStatus == null ? 'font-weight: bold' : ''}">
						<f:setPropertyActionListener
							target="#{settings.requestFilter.requestStatus}" value="#{null}" />
					</p:commandLink>
				</p:column>
			</p:row>
		</p:panelGrid>

		<p:panel header="Отбор">

			<p:panelGrid>
				<p:row>
					<p:column>
						<p:outputLabel value="Стадия:" for="progressStatus" />
					</p:column>
					<p:column>
						<p:selectOneMenu id="progressStatus"
							value="#{settings.requestFilter.progressStatus}">
							<p:ajax process="@this" update="#{update}"
								delay="#{filterChangedAjaxDelay}" />
							<f:selectItem value="#{configurationFacade.anySI}" />
							<f:selectItems value="#{si.array.regular(ProgressStatus.all)}" />
						</p:selectOneMenu>
					</p:column>
					<p:column>
						<p:outputLabel value="Номер заявки:" for="id" />
					</p:column>
					<p:column>
						<p:inputText id="id" value="#{settings.requestFilter.id}" size="8">
							<p:ajax event="change" process="@this" update="#{update}"
								delay="#{filterChangedAjaxDelay}" />
						</p:inputText>
					</p:column>
					<p:column>
						<p:outputLabel value="Имя заявителя:" for="requesterNameMask" />
					</p:column>
					<p:column>
						<p:inputText id="requesterNameMask"
							value="#{settings.requestFilter.requesterNameMask}">
							<p:ajax event="change" process="@this" update="#{update}"
								delay="#{filterChangedAjaxDelay}" />
						</p:inputText>
					</p:column>
				</p:row>
			</p:panelGrid>

		</p:panel>

	</f:subview>

</ui:composition>
